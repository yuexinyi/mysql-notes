# 06表的增删改查

CRUD : Create, Retrieve，Update，Delete

# 6.1 Create

语法：

```mysql
Insert [into] table_name
	[(column [,column] ...)]
	values(value_list)[,(value_list)] ...
value_list:value,[,value] ...
```

栗子：

创建一张学生表

```mysql
mysql> create table student(
    -> id int unsigned primary key auto_increment,
    -> sn int not null unique comment '学号',
    -> name varchar(20) not null,
    -> qq varchar(20)
    -> );
Query OK, 0 rows affected (0.36 sec)
```

## 6.1.1 单行数据 + 全列插入

- 单行数据部分列插入

  ```mysql
  mysql> insert into student values(100,10000,'唐僧',null);
  Query OK, 1 row affected (0.07 sec)
  ```

- 单行数据全列插入

  ```mysql
  mysql> insert into student values(101,10001,'孙悟空','1111');
  Query OK, 1 row affected (0.01 sec)
  ```

- 显示结果

  ```mysql
  mysql> select * from student;
  +-----+-------+--------+------+
  | id  | sn    | name   | qq   |
  +-----+-------+--------+------+
  | 100 | 10000 | 唐僧   | NULL |
  | 101 | 10001 | 孙悟空 | 1111 |
  +-----+-------+--------+------+
  2 rows in set (0.01 sec)
  ```

## 6.1.2 多行数据 + 指定列插入

1. 插入数据

   ```mysql
   mysql> insert into student(id,sn,name) values(102,20001,'曹操'),(103,20002,'孙权');
   Query OK, 2 rows affected (0.01 sec)
   Records: 2  Duplicates: 0  Warnings: 0
   ```

2. 显示结果

   ```mysql
   mysql> select * from student;
   +-----+-------+--------+------+
   | id  | sn    | name   | qq   |
   +-----+-------+--------+------+
   | 100 | 10000 | 唐僧   | NULL |
   | 101 | 10001 | 孙悟空 | 1111 |
   | 102 | 20001 | 曹操   | NULL |
   | 103 | 20002 | 孙权   | NULL |
   +-----+-------+--------+------+
   4 rows in set (0.00 sec)
   ```

# 6.1.3 插入否则更新

- 主键冲突

  ```mysql
  mysql> insert into student(id,sn,name) values(100,10010,'唐大师');
  ERROR 1062 (23000): Duplicate entry '100' for key 'PRIMARY'
  ```

- 唯一键冲突

  ```mysql
  mysql> insert into student(sn,name) values(20001,'曹老师');
  ERROR 1062 (23000): Duplicate entry '20001' for key 'sn'
  ```

# 6.1.4 替换

- 主键或者唯一键没有冲突，直接插入

- 主键或者唯一键有冲突，删除后插入

  ```mysql
  mysql> replace into student(sn,name) values(20001,'曹阿满');
  Query OK, 2 rows affected (0.02 sec)
  ```

  - 1 row affected:表中没有冲突数据，数据被重新插入
  - 2 row affected:表中有冲突数据，删除后重新插入

